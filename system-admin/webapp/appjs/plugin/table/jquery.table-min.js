var MaxTable=function(){this.page=new Pages();this.sortInfo={columnId:"id",fieldName:"id",sortOrder:"desc"}};MaxTable.prototype={initialize:function(a){this.opts=$.extend({id:"id"},a||{});this._s=$("#"+this.opts.table)[0];this.loading=$("#"+this.opts.loading);if(this.opts.isSort==false){this.sortInfo=null}},onLoad:function(c){this.searchParameters=c;var b=this.opts;var d=this._s;var a=b.queryUrl;var e=this;e.loading.block({message:"数据加载中...",css:{width:"70%"}});$.ajax({type:"POST",url:b.queryUrl,data:this.getQueryData(c),dataType:"json",success:function(f){var m=f.data;e.page=f.pageInfo;while(d.rows.length>0){d.deleteRow(0)}if(e.page.totalRowNum==0){var l=d.insertRow(0);var k=l.insertCell(0);k.colSpan=b.headerColumns.length;k.innerHTML="没有记录！"}else{for(var h=0;h<m.length;h++){var l=d.insertRow(d.rows.length);l.id=h+1;if(h%2==0){l.className="td1"}else{l.className="td2"}for(var g=0;g<b.headerColumns.length;g++){var k=l.insertCell(g);if(b.headerColumns[g].renderer){k.innerHTML=b.headerColumns[g].renderer(m[h][b.id],m[h][b.headerColumns[g].id],m[h])}else{k.innerHTML=m[h][b.headerColumns[g].id]}}}var l=d.insertRow(d.rows.length);var k=l.insertCell(0);k.colSpan=b.headerColumns.length;k.innerHTML=e.createPage(f.pageInfo);$("#pageSize",k).bind("blur",function(){var i=/^\d{1,}$/;if(!i.test(this.value)){alert("分页只能是数字！");return}if(parseInt(this.value)<=0){alert("分页数字不正确！");return}e.page.pageSize=this.value;e.page.totalRowNum=-1;e.query()});$("#firstPage",k).bind("click",function(){e.page.pageNum=1;e.query()});$("#prePage",k).bind("click",function(){e.page.pageNum=e.page.pageNum-1;e.query()});$("#nextPage",k).bind("click",function(){e.page.pageNum=e.page.pageNum+1;e.query()});$("#lastPage",k).bind("click",function(){e.page.pageNum=e.page.totalPageNum;e.query()});$("#Pg",k).bind("blur",function(){var i=/^\d{1,}$/;if(!i.test(this.value)){alert("分页只能是数字！");return}if(parseInt(this.value)<=0){alert("分页数字不正确！");return}e.page.pageNum=this.value;e.query()})}e.loading.unblock()},error:function(f){alert(f.responseText)}})},createPage:function(a){var b="";b+='每页显示<input id="pageSize"   value="'+a.pageSize+'" type="text" id="pageSize"   style="width:20px; border:solid #CCC 1px"/>';b+="条&nbsp;|&nbsp;共<font color=red>"+a.totalPageNum+"</font>页 , <font color=red>"+a.totalRowNum+"</font>条数据";b+="&nbsp;|&nbsp;";b+='<input id="firstPage"  type="button" '+(a.pageNum>1?' style="background:#FFF ; border:none;cursor:pointer"  ':' disabled="disabled" ')+'   name="button" id="button" value="首页"  style="background:#FFF ; border:none;"/>&nbsp;';b+='<input id="prePage"  type="button" '+(a.pageNum>1?'  style="background:#FFF ; border:none;cursor:pointer" ':' disabled="disabled" ')+'   name="button" id="button" value="上一页"  style="background:#FFF ; border:none;"/>&nbsp;';b+='<input id="nextPage"  type="button" '+(a.totalPageNum>a.pageNum?' style="background:#FFF ; border:none;cursor:pointer"  ':' disabled="disabled" ')+'   name="button" id="button" value="下一页"  style="background:#FFF ; border:none;"/>&nbsp;';b+='<input id="lastPage"  type="button"  '+(a.totalPageNum>a.pageNum?' style="background:#FFF ; border:none;cursor:pointer"  ':' disabled="disabled" ')+'  name="button" id="button" value="尾页"  style="background:#FFF ; border:none;"/>&nbsp;';b+='&nbsp;|&nbsp;第<input id="Pg"   value="'+a.pageNum+'" type="text" id="Pg" style="width:20px; border:solid #CCC 1px"/>页';return b},getQueryData:function(b){var a={_gt_json:"{pageInfo:"+$.toJSON(this.page)+",action:'load',filterInfo:[],sortInfo:["+(this.sortInfo==null?"":$.toJSON(this.sortInfo))+"]}"};a=$.extend(a,b);return a},query:function(){this.onLoad(this.searchParameters)}};function Pages(){this.endRowNum=-1;this.pageNum=1;this.startRowNum=1;this.totalPageNum=0;this.totalRowNum=-1;this.pageSize=10}function IdCheckBoxRenderer(a,b){return'<input type="checkbox" name="c"	value="'+b+'"">'}function IdRadioRenderer(a,b){return'<input type="checkbox" name="c"	value="'+b+'"">'};