package com.mpaike.core.util;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.zip.GZIPInputStream;
import java.util.zip.GZIPOutputStream;

public class StringZipUtil {

	  // 压缩  
	  public static String compress(String str) throws IOException {  
	    if (str == null || str.length() == 0) {  
	      return str;  
	    }  
	    ByteArrayOutputStream out = new ByteArrayOutputStream();  
	    GZIPOutputStream gzip = new GZIPOutputStream(out);  
	    gzip.write(str.getBytes());  
	    gzip.close();
	    return out.toString("ISO-8859-1");  
	  }  
	  
	  // 解压缩  
	  public static String uncompress(String str) throws IOException {  
	    if (str == null || str.length() == 0) {  
	      return str;  
	    }  
	    ByteArrayOutputStream out = new ByteArrayOutputStream();  
	    ByteArrayInputStream in = new ByteArrayInputStream(str.getBytes("ISO-8859-1"));  
	    GZIPInputStream gunzip = new GZIPInputStream(in);  
	    byte[] buffer = new byte[256];  
	    int n;  
	    while ((n = gunzip.read(buffer)) >= 0) {  
	      out.write(buffer, 0, n);  
	    }    
	    return out.toString();  
	  }  
	  
	  // 测试方法  
	  public static void main(String[] args) throws IOException {  
	        
	      //测试字符串  
	      String text = "{userGene={多点式触摸屏手机=8.714777537154038, 国内要闻=3007.2091158673175, 索尼手机=10.430849147089152, 时尚=6.551928085133861, 国际要闻=3002.2885032168474, 相机=8.01131665991658, 索尼公司=6.135996037081856, 汽车=3019.6800982551695},artList:[368309, 408611, 374192, 397487, 371423, 406737, 387098, 368390, 415475, 387095, 376096, 369035, 415093, 387297, 377336, 368190, 374391, 374379, 367027, 397499, 380277, 391192, 374799, 370414, 391189, 381112, 381115, 411529, 397299, 403431, 381626, 381623, 406714, 374783, 376305, 415268, 381635, 388570, 418384, 387890, 374770, 370433, 370435, 367012, 370849, 404788, 368157, 374147, 381140, 382008, 394182, 394181, 382935, 397977, 374550, 415047, 391149, 409627, 406067, 394191, 394190, 406778, 386475, 364139, 387072, 369007, 388313, 371483, 411731, 387479, 368178, 418131, 377123, 374933, 382219, 276006, 382929, 374537, 374160, 396026, 406432, 383109, 409646, 374158, 374940, 365016, 400029, 370600, 405187, 381879, 374949, 401408, 374721, 387006, 408152, 405214, 410467, 286014, 374729, 403695, 408945, 409177, 365033, 387209, 404736, 368653, 368847, 400061, 368635, 409665, 373050, 365040, 370628, 400057, 404725, 374514, 404166, 374512, 377124, 404161, 390370, 349031, 370637, 374703, 408964, 387817, 384407, 374502, 368613, 418868, 410457, 387800, 387807, 404753, 404140, 338042, 408118, 384014, 374769, 392287, 399057, 390347, 390137, 404965, 418843, 410240, 390330, 418646, 370860, 370861, 365081, 406979, 392477, 384038, 370673, 394110, 327025, 403858, 398599, 404989, 384047, 374735, 405101, 409387, 370684, 383188, 403460, 382299, 403461, 399430, 418345, 406958, 408735, 398547, 398367, 403223, 375030, 375033, 326019, 398531, 398161, 385707, 401388, 397895, 379878, 385509, 407492, 397897, 411010, 389145, 283008, 372017, 402659, 382782, 409466, 409460, 392981, 405263, 398553, 408093, 403932, 402647, 392979, 408350, 409472, 391921, 409470, 397641, 408083, 390292, 397645, 402273, 409243, 337038, 392512, 391474, 411041, 402477, 401702, 402682, 408089, 410394, 404515, 372049, 392914, 402284, 371189, 411056, 373018, 240137, 402293, 368005, 397662, 409226, 397664, 398524, 382544, 386616, 392538, 398919, 414322, 411024, 378332, 386082, 337009, 386080, 368012, 368010, 386622, 379861, 372064, 411026, 375022, 375020, 337019, 404501, 372074, 397037, 386432, 383408, 407403, 368220, 370377, 415006,386258, 368223, 376356, 372286, 411490, 411989, 381435, 400417, 368420, 397043, 374107, 397024, 374109, 404564, 397028, 387610, 368231, 396034, 372274, 368430, 368433, 411978, 374305, 378545, 397030, 409003, 386454, 368245, 374113, 368434, 386235, 381592, 397434, 397628, 367170, 392786, 351140, 386650, 387429, 386465, 386247, 374127, 397228, 368250, 374131, 372297, 368247, 397636, 368451, 387431, 372296, 397638, 402457, 407999, 410615, 414381, 37192259, 371124, 368203, 415237, 407678, 376350]}";  

	      System.out.println("原长度："+text.length());
	        
	      System.out.println("压缩后："+compress(text).length());
	        
	      System.out.println("解压缩："+uncompress(compress(text)));
	  }  

}
